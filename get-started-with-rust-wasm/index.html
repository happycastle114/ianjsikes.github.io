<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.7f0bfe3b90b726f99e1a.css">@font-face{font-family:Fira Mono;font-style:normal;font-display:swap;font-weight:400;src:local("Fira Mono Regular "),local("Fira Mono-Regular"),url(/static/fira-mono-latin-400-e3ae866ff2823372c9e3aaadebbd8db2.woff2) format("woff2"),url(/static/fira-mono-latin-400-452f020811cb7c0d8e4c7a8565279552.woff) format("woff")}@font-face{font-family:Fira Mono;font-style:normal;font-display:swap;font-weight:500;src:local("Fira Mono Medium "),local("Fira Mono-Medium"),url(/static/fira-mono-latin-500-e8330ccb5d46418d07df67a12e125315.woff2) format("woff2"),url(/static/fira-mono-latin-500-619d297444f7231cb1e2c2e90e460063.woff) format("woff")}@font-face{font-family:Fira Mono;font-style:normal;font-display:swap;font-weight:700;src:local("Fira Mono Bold "),local("Fira Mono-Bold"),url(/static/fira-mono-latin-700-88eb04d0e7cd2ef944219997d022085f.woff2) format("woff2"),url(/static/fira-mono-latin-700-dfbd25650dfa16dc45d8d6e57bbf13cf.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:300;src:local("Open Sans Light "),local("Open Sans-Light"),url(/static/open-sans-latin-300-60c866748ff15f5b347fdba64596b1b1.woff2) format("woff2"),url(/static/open-sans-latin-300-521d17bc9f3526c690e8ada6eee55bec.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:300;src:local("Open Sans Light italic"),local("Open Sans-Lightitalic"),url(/static/open-sans-latin-300italic-06bbd3188b34820cd83a0e0b3d0a6f57.woff2) format("woff2"),url(/static/open-sans-latin-300italic-8a648ff38ded89ea15916e84529d62d3.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:400;src:local("Open Sans Regular "),local("Open Sans-Regular"),url(/static/open-sans-latin-400-cffb686d7d2f4682df8342bd4d276e09.woff2) format("woff2"),url(/static/open-sans-latin-400-bf2d0783515b7d75c35bde69e01b3135.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:400;src:local("Open Sans Regular italic"),local("Open Sans-Regularitalic"),url(/static/open-sans-latin-400italic-987032ea5d57c93d8da215678eae3b86.woff2) format("woff2"),url(/static/open-sans-latin-400italic-db70d0b9cb27ada1a260a2b35e756b8b.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:600;src:local("Open Sans SemiBold "),local("Open Sans-SemiBold"),url(/static/open-sans-latin-600-223a277bd88d8a90c8cdf24cda0ad5f5.woff2) format("woff2"),url(/static/open-sans-latin-600-1cd5320f8937d337b61d5117cf9d7b28.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:600;src:local("Open Sans SemiBold italic"),local("Open Sans-SemiBolditalic"),url(/static/open-sans-latin-600italic-4950a7205f0b5cefe41fc03ac346e236.woff2) format("woff2"),url(/static/open-sans-latin-600italic-318ea1ada4102c0704a0637228dcad03.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:700;src:local("Open Sans Bold "),local("Open Sans-Bold"),url(/static/open-sans-latin-700-d08c09f2f169f4a6edbcf8b8d1636cb4.woff2) format("woff2"),url(/static/open-sans-latin-700-623e3205570002af47fc2b88f9335d19.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:700;src:local("Open Sans Bold italic"),local("Open Sans-Bolditalic"),url(/static/open-sans-latin-700italic-c02f5da6e82e1efe0b45841bfd49ce37.woff2) format("woff2"),url(/static/open-sans-latin-700italic-72e19cbb0e38c6773a7751156752cec4.woff) format("woff")}@font-face{font-family:Open Sans;font-style:normal;font-display:swap;font-weight:800;src:local("Open Sans ExtraBold "),local("Open Sans-ExtraBold"),url(/static/open-sans-latin-800-aaeffaf205b9bbb09920089a14dbe9e8.woff2) format("woff2"),url(/static/open-sans-latin-800-c6aa0c4a601fb6ac66f8253fa594dff5.woff) format("woff")}@font-face{font-family:Open Sans;font-style:italic;font-display:swap;font-weight:800;src:local("Open Sans ExtraBold italic"),local("Open Sans-ExtraBolditalic"),url(/static/open-sans-latin-800italic-6b3973ffe02bb6a8be0f8453506ec032.woff2) format("woff2"),url(/static/open-sans-latin-800italic-79b58175343190550489efe46a7f1138.woff) format("woff")}#___gatsby,body,div[role=group][tabindex],html{margin:0}h1,h2,h3,h4,h5,h6{font-family:Fira Mono}body{margin:1rem}*{font-family:Open Sans}</style><meta name="generator" content="Gatsby 2.5.3"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="shortcut icon" href="/icons/icon-48x48.png?v=d3d27076658cb318de24021c3094e494"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#000000"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=d3d27076658cb318de24021c3094e494"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=d3d27076658cb318de24021c3094e494"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=d3d27076658cb318de24021c3094e494"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=d3d27076658cb318de24021c3094e494"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=d3d27076658cb318de24021c3094e494"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=d3d27076658cb318de24021c3094e494"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=d3d27076658cb318de24021c3094e494"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=d3d27076658cb318de24021c3094e494"/><title data-react-helmet="true">Get Started with Rust, WebAssembly, and Webpack | Ian J Sikes</title><meta data-react-helmet="true" name="description" content="Everything you need to start running Rust code on the web. Easily interop with JavaScript using a Webpack plugin."/><meta data-react-helmet="true" property="og:title" content="Get Started with Rust, WebAssembly, and Webpack"/><meta data-react-helmet="true" property="og:description" content="Everything you need to start running Rust code on the web. Easily interop with JavaScript using a Webpack plugin."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Ian J Sikes"/><meta data-react-helmet="true" name="twitter:title" content="Get Started with Rust, WebAssembly, and Webpack"/><meta data-react-helmet="true" name="twitter:description" content="Everything you need to start running Rust code on the web. Easily interop with JavaScript using a Webpack plugin."/><style data-styled="gxxErC  kBnvwD" data-styled-version="4.2.0">
/* sc-component-id: sc-global-4029071177 */
code[class*='language-'],pre[class*='language-']{color:#5e6687;background:#f5f7ff;font-family:'Fira Mono',Consolas,Monaco,'Andale Mono','Ubuntu Mono', monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;} code[class*='language-'] .token,pre[class*='language-'] .token{font-family:'Fira Mono',Consolas,Monaco,'Andale Mono','Ubuntu Mono', monospace;} pre[class*='language-']::-moz-selection,pre[class*='language-'] ::-moz-selection,code[class*='language-']::-moz-selection,code[class*='language-'] ::-moz-selection{background:#dfe2f1;} pre[class*='language-']::selection,pre[class*='language-'] ::selection,code[class*='language-']::selection,code[class*='language-'] ::selection{background:#dfe2f1;} pre[class*="language-"]{padding:1em;margin:.5em 0;overflow:auto;} :not(pre) > code[class*='language-'],pre[class*='language-']{border:2px solid black;border-radius:4px;box-shadow:1px 1px 0px black,3px 3px 0px black,5px 5px 0px black;} :not(pre) > code[class*="language-"]{padding:.1em;border-radius:.3em;} .token.comment,.token.prolog,.token.doctype,.token.cdata{color:#898ea4;} .token.punctuation{color:#5e6687;} .token.namespace{opacity:.7;} .token.operator,.token.boolean,.token.number{color:#c76b29;} .token.property{color:#c08b30;} .token.tag{color:#3d8fd1;} .token.string{color:#22a2c9;} .token.selector{color:#6679cc;} .token.attr-name{color:#c76b29;} .token.entity,.token.url,.language-css .token.string,.style .token.string{color:#22a2c9;} .token.attr-value,.token.keyword,.token.control,.token.directive,.token.unit{color:#ac9739;} .token.statement,.token.regex,.token.atrule{color:#22a2c9;} .token.placeholder,.token.variable{color:#3d8fd1;} .token.deleted{-webkit-text-decoration:line-through;text-decoration:line-through;} .token.inserted{border-bottom:1px dotted #202746;-webkit-text-decoration:none;text-decoration:none;} .token.italic{font-style:italic;} .token.important,.token.bold{font-weight:bold;} .token.important{color:#c94922;} .token.entity{cursor:help;} pre > code.highlight{outline:.4em solid #c94922;outline-offset:.4em;} .line-numbers .line-numbers-rows{border-right-color:#dfe2f1;} .line-numbers-rows > span:before{color:#979db4;}
/* sc-component-id: blog-post__Container-sc-1993m0e-0 */
.gxxErC{margin:3rem auto;max-width:800px;}
/* sc-component-id: blog-post__PageTitle-sc-1993m0e-1 */
.kBnvwD a{color:black;font-family:'Fira Code';-webkit-text-decoration:underline;text-decoration:underline;}</style><link as="script" rel="preload" href="/webpack-runtime-e442fcb63db2fd2313bc.js"/><link as="script" rel="preload" href="/styles-268726727893e29cc23e.js"/><link as="script" rel="preload" href="/app-4e5e4d1462633824b891.js"/><link as="script" rel="preload" href="/0-0af145cc6aa8266e7fd4.js"/><link as="script" rel="preload" href="/1-90a14c6c2e861ca061bf.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-bfc706435ae1e7760a6f.js"/><link as="fetch" rel="preload" href="/static/d/2/path---get-started-with-rust-wasm-125-a8c-pxFMdFOh9rtUpMLlXoTNampoubY.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="blog-post__Container-sc-1993m0e-0 gxxErC"><h2 class="blog-post__PageTitle-sc-1993m0e-1 kBnvwD"><a href="/">Ian J Sikes</a></h2><header><h1>Get Started with Rust, WebAssembly, and Webpack</h1><p style="display:block">June 22, 2017</p></header><article><blockquote>
<h2>UPDATE!</h2>
<p>The Rust Compiler now has native support for compilation to WebAssembly without Emscripten! Most of the info in this post is <strong>no longer relevant</strong>. For an <em>amazing</em> and up-to-date resource on Rust and WebAssembly, check out the <a href="https://rustwasm.github.io/docs/book/">Rust and WebAssembly Book</a>.</p>
</blockquote>
<p>I’ve been seeing a lot of really cool <a href="https://twitter.com/search?q=%23wasm&#x26;src=typd">#wasm</a> <em>(WebAssembly)</em> stuff on <a href="https://twitter.com/jose_pedro_dias/status/876592025881251840">Twitter</a> and <a href="https://news.ycombinator.com/item?id=14341623">Hacker News</a> lately, but I didn’t know much about what it is exactly, or how to start using it. Because it is so new — only being enabled in Chrome last March — up-to-date guides are few and far between. After struggling through getting something to run, here’s what I’ve learned:</p>
<p><a href="http://webassembly.org/">WebAssembly</a> is a <em>cool new binary format</em> and compile target for the web. That means you can compile languages like C, C++, and Rust to .wasm files and execute that code in your browser. In most cases, the resulting code is significantly <a href="https://hacks.mozilla.org/2017/03/why-webassembly-is-faster-than-asm-js/">faster <em>and</em> smaller</a> than Javascript.</p>
<p>This guide will walk you through setting up Rust, WebAssembly, and Webpack in a typical JS web app. The goal is to be able to execute low-level Rust code in the browser alongside the Javascript you know and love <em>(or hate)</em>.</p>
<p><strong><em>Note:</em></strong> These technologies are constantly changing. This guide is using:</p>
<ul>
<li>webpack 3.0.0</li>
<li>cargo 0.19.0</li>
<li>emcc 1.37.13</li>
</ul>
<p><a href="https://github.com/ianjsikes/rust-wasm-webpack-tutorial">Here is the finished project</a>. If you run into a problem, let me know with an <a href="https://github.com/ianjsikes/rust-wasm-webpack-tutorial/issues/new">issue</a> or <a href="https://github.com/ianjsikes/rust-wasm-webpack-tutorial/compare">PR</a> 😊.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/f205f2ceb5011e554c08cd43087b4d81/a296c/wasm-logo.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 50.74999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAv/aAAwDAQACEAMQAAAB2Fo32bFiH//EABkQAAMAAwAAAAAAAAAAAAAAAAECAwAQEf/aAAgBAQABBQK47KCFaYp3/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFxEAAwEAAAAAAAAAAAAAAAAAAQIREP/aAAgBAgEBPwEPBM//xAAaEAEAAgMBAAAAAAAAAAAAAAABABARITFB/9oACAEBAAY/AkJnfPSiif/EABwQAQACAgMBAAAAAAAAAAAAAAEAESFxEDFBof/aAAgBAQABPyFDirWDcUK/S6OGvJiv2eaT/9oADAMBAAIAAwAAABADD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABYRAQEBAAAAAAAAAAAAAAAAAAEQUf/aAAgBAgEBPxBF3P/EABsQAQACAwEBAAAAAAAAAAAAAAERMQAhQRBh/9oACAEBAAE/ENdlASumNyC5Doi/Plp7kA20LyW5pn//2Q=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="WASM Logo"
        title=""
        src="/static/f205f2ceb5011e554c08cd43087b4d81/c739e/wasm-logo.jpg"
        srcset="/static/f205f2ceb5011e554c08cd43087b4d81/8ee9c/wasm-logo.jpg 148w,
/static/f205f2ceb5011e554c08cd43087b4d81/ebbe7/wasm-logo.jpg 295w,
/static/f205f2ceb5011e554c08cd43087b4d81/c739e/wasm-logo.jpg 590w,
/static/f205f2ceb5011e554c08cd43087b4d81/a296c/wasm-logo.jpg 800w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<h3>What you will need</h3>
<p>Follow these links to install:</p>
<ul>
<li><a href="https://nodejs.org/en/download/">Node</a></li>
<li><a href="https://www.rust-lang.org/en-US/install.html">Rust</a></li>
</ul>
<h3>Install the Emscripten Rust compiler</h3>
<p>Install the WebAssembly <a href="http://kripken.github.io/emscripten-site/">Emscripten</a> compile target for Rust:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ rustup target <span class="token function">add</span> wasm32-unknown-emscripten</code></pre></div>
<p>Install <a href="https://cmake.org">cmake</a>. This varies depending on your platform, choose the option right for you or see the <a href="https://cmake.org/install/">install page</a> for more options:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ brew <span class="token function">install</span> cmake                  <span class="token comment"># MacOS, brew</span>
$ <span class="token function">sudo</span> port <span class="token function">install</span> cmake             <span class="token comment"># MacOS, MacPorts</span>
$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> cmake          <span class="token comment"># Debian Linux</span></code></pre></div>
<p>Install the Emscripten SDK. This is going to take a while (<em>~2 hours for me</em>).</p>
<blockquote>
<p>Note: If ./emsdk update or ./emsdk install give you errors, it may be that Python3 is your default Python. Try installing Python 2.7 and replacing ./emsdk … with python2.7 emsdk …</p>
</blockquote>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">cd</span> ~
$ <span class="token function">wget</span> <span class="token punctuation">[</span>https://s3.amazonaws.com/mozilla-games/emscripten/releases/emsdk-portable.tar.gz<span class="token punctuation">]</span><span class="token punctuation">(</span>https://s3.amazonaws.com/mozilla-games/emscripten/releases/emsdk-portable.tar.gz<span class="token punctuation">)</span>
$ <span class="token function">tar</span> -xvf emsdk-portable.tar.gz
$ <span class="token function">cd</span> emsdk-portable
$ ./emsdk update
$ ./emsdk <span class="token function">install</span> sdk-incoming-64bit</code></pre></div>
<p><img src="https://imgs.xkcd.com/comics/compiling.png" alt="https://xkcd.com/303/"></p>
<p><a href="https://xkcd.com/303/"><em>https://xkcd.com/303/</em></a></p>
<p>Next, we’ll need to add the following directories to our PATH environment variable:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">~/emsdk-portable
~/emsdk-portable/clang/fastcomp/build_incoming_64/bin
~/emsdk-portable/emscripten/incoming</code></pre></div>
<p>Reload the terminal, then run emcc -v to check that the Emscripten compiler is installed.</p>
<h3>Compile and load Rust with Webpack</h3>
<p>Let’s create a Rust/Javascript hybrid project:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">cargo new tutorial --bin --vcs none
<span class="token function">cd</span> tutorial
<span class="token function">npm</span> init        <span class="token comment"># You can just hit enter for every option</span></code></pre></div>
<p>We need to install <a href="https://webpack.js.org/">webpack</a>, <a href="https://www.npmjs.com/package/http-server">http-server</a> to serve our content, and <a href="https://www.npmjs.com/package/rust-wasm-loader">rust-wasm-loader</a> to compile and load Rust code as .wasm modules.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack
http-server rust-wasm-loader</code></pre></div>
<p>Add a few helpful scripts to our package.json:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"compile"</span><span class="token operator">:</span> <span class="token string">"webpack --progress"</span><span class="token punctuation">,</span>
    <span class="token property">"serve"</span><span class="token operator">:</span> <span class="token string">"http-server"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Create an index.html:</p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Hello World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>build/bundle.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre></div>
<p>Create a webpack.config.js:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">'/build'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.rs$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">'rust-wasm-loader'</span><span class="token punctuation">,</span>
          options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// The path to the webpack output relative to the project root</span>
            path<span class="token punctuation">:</span> <span class="token string">'build'</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// The .wasm 'glue' code generated by Emscripten requires these node builtins,</span>
  <span class="token comment">// but won't actually use them in a web environment. We tell Webpack to not resolve those</span>
  <span class="token comment">// require statements since we know we won't need them.</span>
  externals<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Let’s add a function to our src/main.rs that we will call from Javascript:</p>
<div class="gatsby-highlight" data-language="rust"><pre class="language-rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"Hello, world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Functions that you wish to access from Javascript</span>
<span class="token comment">// must be marked as no_mangle</span>
<span class="token attribute attr-name">#[no_mangle]</span>
<span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> i32<span class="token punctuation">,</span> b<span class="token punctuation">:</span> i32<span class="token punctuation">)</span> <span class="token punctuation">-></span> i32 <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span></code></pre></div>
<p>Finally, we’ll write some code in src/index.js to load and use the WebAssembly module:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> wasm <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./main.rs'</span><span class="token punctuation">)</span>

wasm<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">{</span> noExitRuntime<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">module</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// Create a Javascript wrapper around our Rust function</span>
  <span class="token keyword">const</span> add <span class="token operator">=</span> module<span class="token punctuation">.</span><span class="token function">cwrap</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">,</span> <span class="token string">'number'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'number'</span><span class="token punctuation">,</span> <span class="token string">'number'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Calling rust functions from javascript!'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>Run these commands to compile and serve the project:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> run compile
$ <span class="token function">npm</span> run serve</code></pre></div>
<p>Navigate the browser to localhost:8080, open the Javascript console, and rest your weary eyes on the glorious output of our WebAssembly compiled Rust code!</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/b69d09c2d56a7235c099de588823abf7/daaee/wasm-console.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 47.153284671532845%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABp0lEQVQoz2Pw9Ulx9E52CcjyjijyDC3wCs13842yd/aztPXQM7YFIl0jax1DKAKyIVxdIxtTKxeGoIwZASkTvJMmOEX1OEZ224e16Zq4yClqySrpyCnpyKvoaeiYa+lbaepZahtYa+haqutYauiaq+uYe/tHMGTnl4dHJcQmpAJReFSsX1AYEAUER/gHRwDJ0Mj4nILKkoqGvOKasqqm7OK6jPzqnPzKzLzywtI6hv8UAIb2rgmt7T3TF+2au/pMS3tfcxsIdXRNau3ob++a2NTa2941qbtvcmNrZ3fPpM7uie1dfR2dQKl+oC4GbQMbXXN/Y5dUM+9CfQs/Y2s/Q1N/Q5twHYsQPctgQ7sIXcsgVV0LZU1TeRV9eVVdORU9GWUdCVkVcRkVhsjYdDd3L28vL09PTzcPf3cPP2c3fwfXACCydQ6wdQkEkjZO/kDS2tHX2tHP1ifWxifG283b08WbITg8ydbe3dHVx94ZiLztnLyBpKOLl4Ozt7WDj6W9j5UDEPnCkbVnlJVnlKert4ezJ4OFnZeJlYeJNRSZghGIbQVimOFFAEWZzzFV+/tZAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="It’s happening!"
        title=""
        src="/static/b69d09c2d56a7235c099de588823abf7/b9e4f/wasm-console.png"
        srcset="/static/b69d09c2d56a7235c099de588823abf7/cf440/wasm-console.png 148w,
/static/b69d09c2d56a7235c099de588823abf7/d2d38/wasm-console.png 295w,
/static/b69d09c2d56a7235c099de588823abf7/b9e4f/wasm-console.png 590w,
/static/b69d09c2d56a7235c099de588823abf7/daaee/wasm-console.png 685w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p><em>It’s happening!</em></p>
<p><strong>We did it!</strong> <a href="https://github.com/ianjsikes/rust-wasm-webpack-tutorial">Here is the finished project</a>. I hope this tutorial helps you explore the <em>exciting new world of WebAssembly</em>. Below are some resources that I’ve found useful. Contact me on <a href="https://twitter.com/ianjsikes">Twitter</a> if you have any questions/comments/feedback/hate-mail.</p>
<h3>Resources</h3>
<ul>
<li>
<p><a href="http://www.hellorust.com/emscripten/">Compiling Rust to your Browser</a></p>
</li>
<li>
<p><a href="http://kripken.github.io/emscripten-site/docs/index.html">Emscripten Docs</a></p>
</li>
<li>
<p><a href="http://asquera.de/blog/2017-04-10/the-path-to-rust-on-the-web/">The Path to Rust on the Web</a> — This post has more in-depth usage examples.</p>
</li>
<li>
<p><a href="https://crates.io/crates/webplatform">webplatform</a> — A Rust crate for interacting with the DOM.</p>
</li>
<li>
<p><a href="https://developer.mozilla.org/en-US/docs/WebAssembly">WebAssembly — MDN</a></p>
</li>
<li>
<p><a href="https://users.rust-lang.org/t/compiling-to-the-web-with-rust-and-emscripten/7627">Compiling to the web with Rust and emscripten</a></p>
</li>
<li>
<p><a href="https://github.com/mrdziuban/rust-emscripten-loader">mrdziuban/rust-emscripten-loader</a> — <a href="https://www.npmjs.com/package/rust-wasm-loader">rust-wasm-loader</a> is a fork of this awesome project with small changes to the way modules are initialized. Check this loader out if you want the flexibility of choosing between asm.js and WebAssembly targets.</p>
</li>
</ul></article><hr/><nav><ul role="navigation" style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li></li><li></li></ul></nav></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'undefined', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"get-started-with-rust-wasm-125","path":"/get-started-with-rust-wasm/"};window.dataPath="2/path---get-started-with-rust-wasm-125-a8c-pxFMdFOh9rtUpMLlXoTNampoubY";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-4e5e4d1462633824b891.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-3c6d8da1c5b68ed6b359.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-bfc706435ae1e7760a6f.js"],"component---src-pages-404-js":["/component---src-pages-404-js-29c65e7009c79cb1c0cd.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-50c4062b2c4f33b2b6cb.js"],"component---src-pages-index-js":["/component---src-pages-index-js-ae617e1546af5058233f.js"],"pages-manifest":["/pages-manifest-edaaec49e4626b96a0ab.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-bfc706435ae1e7760a6f.js" async=""></script><script src="/1-90a14c6c2e861ca061bf.js" async=""></script><script src="/0-0af145cc6aa8266e7fd4.js" async=""></script><script src="/app-4e5e4d1462633824b891.js" async=""></script><script src="/styles-268726727893e29cc23e.js" async=""></script><script src="/webpack-runtime-e442fcb63db2fd2313bc.js" async=""></script></body></html>